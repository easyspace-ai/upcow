# CycleHedge 策略订单分析报告（btc-updown-15m-1767040200）
**分析时间**: 2025-12-30  
**日志文件**: btc-updown-15m-1767040200.log  
**文件大小**: 33.03 MB

## 📊 交易概况

### 周期信息
- **市场**: btc-updown-15m-1767040200
- **周期重置**: 1次

### 订单统计
- **总订单数**: 110笔
- **UP订单**: 1笔（0.9%）
- **DOWN订单**: 109笔（99.1%）
- **买入订单**: 109笔
- **卖出订单**: 1笔（可能是平仓或测试）
- **订单状态**: 全部为 `filled`（100%成交率）

### 成交统计
- **UP订单金额**: 5.20 USDC
- **DOWN订单金额**: 402.10 USDC
- **总成交金额**: 407.30 USDC

### 持仓情况
- **持仓更新**: 110次
- **持仓统计**: 11,579次
- **持仓更新显示**: DOWN持仓从970增长到1070
- **持仓统计显示**: UP=10.00, DOWN=0.00 ⚠️

### ⚠️ 问题发现
- **持仓不一致**: 持仓更新显示DOWN持仓1070，但持仓统计显示DOWN=0
- **可能原因**: `currentTotals`函数读取持仓时，可能因为：
  1. 持仓的MarketSlug不匹配
  2. 持仓的Status不是Open
  3. 持仓没有成本信息（TotalFilledSize=0或CostBasis=0），导致被跳过

---

## 📋 订单列表（完整表格 - 包含Token类型）

| 序号 | 时间 | 订单ID | Token | 方向 | 价格 | 数量 | 金额(USDC) |
|------|------|--------|-------|------|------|------|------------|
| 1 | | order_1767040257722839000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 2 | | order_1767040257723067000 | UP | BUY | 0.5200 | 10.00 | 5.2000 |
| 3 | | order_1767040257726841000 | DOWN | SELL | 0.4400 | 10.00 | 4.4000 |
| 4 | | order_1767040257727784000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 5 | | order_1767040258801345000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 6 | | order_1767040259826873000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 7 | | order_1767040260824080000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 8 | | order_1767040262826111000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 9 | | order_1767040263861624000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 10 | | order_1767040264830668000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 11 | | order_1767040267026519000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 12 | | order_1767040267389798000 | DOWN | BUY | 0.4300 | 10.00 | 4.3000 |
| 13 | | order_1767040267392045000 | DOWN | BUY | 0.3800 | 10.00 | 3.8000 |
| 14 | | order_1767040267427312000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 15 | | order_1767040267430696000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 16 | | order_1767040267432501000 | DOWN | BUY | 0.3500 | 10.00 | 3.5000 |
| 17 | | order_1767040267433480000 | DOWN | BUY | 0.3400 | 10.00 | 3.4000 |
| 18 | | order_1767040268498305000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 19 | | order_1767040270500405000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 20 | | order_1767040272516096000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 21 | | order_1767040274557309000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 22 | | order_1767040276614537000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 23 | | order_1767040277394783000 | DOWN | BUY | 0.3400 | 10.00 | 3.4000 |
| 24 | | order_1767040278625421000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 25 | | order_1767040280626548000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 26 | | order_1767040280668574000 | DOWN | BUY | 0.3400 | 10.00 | 3.4000 |
| 27 | | order_1767040282698928000 | DOWN | BUY | 0.3400 | 10.00 | 3.4000 |
| 28 | | order_1767040283229050000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 29 | | order_1767040285229561000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 30 | | order_1767040287276238000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 31 | | order_1767040289308798000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 32 | | order_1767040291425366000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 33 | | order_1767040292791136000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 34 | | order_1767040293623912000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 35 | | order_1767040294808527000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 36 | | order_1767040296808941000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 37 | | order_1767040297540949000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 38 | | order_1767040297555416000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 39 | | order_1767040298635044000 | DOWN | BUY | 0.2900 | 10.00 | 2.9000 |
| 40 | | order_1767040299542823000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 41 | | order_1767040300594603000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 42 | | order_1767040301561477000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 43 | | order_1767040303627143000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 44 | | order_1767040303809805000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 45 | | order_1767040304512292000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 46 | | order_1767040306626851000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 47 | | order_1767040306805627000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 48 | | order_1767040308803644000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 49 | | order_1767040310807878000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 50 | | order_1767040310980264000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 51 | | order_1767040312826741000 | DOWN | BUY | 0.3000 | 10.00 | 3.0000 |
| 52 | | order_1767040313267670000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 53 | | order_1767040313323987000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 54 | | order_1767040315425970000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 55 | | order_1767040315805892000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 56 | | order_1767040317826632000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 57 | | order_1767040319261345000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 58 | | order_1767040320762488000 | DOWN | BUY | 0.3100 | 10.00 | 3.1000 |
| 59 | | order_1767040321449534000 | DOWN | BUY | 0.3200 | 10.00 | 3.2000 |
| 60 | | order_1767040321672780000 | DOWN | BUY | 0.3300 | 10.00 | 3.3000 |
| 61 | | order_1767040321710737000 | DOWN | BUY | 0.3400 | 10.00 | 3.4000 |
| 62 | | order_1767040321717789000 | DOWN | BUY | 0.3500 | 10.00 | 3.5000 |
| 63 | | order_1767040321775595000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 64 | | order_1767040323826715000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 65 | | order_1767040323885501000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 66 | | order_1767040325173073000 | DOWN | BUY | 0.3800 | 10.00 | 3.8000 |
| 67 | | order_1767040327226730000 | DOWN | BUY | 0.3800 | 10.00 | 3.8000 |
| 68 | | order_1767040329237305000 | DOWN | BUY | 0.3800 | 10.00 | 3.8000 |
| 69 | | order_1767040330085670000 | DOWN | BUY | 0.3900 | 10.00 | 3.9000 |
| 70 | | order_1767040331243626000 | DOWN | BUY | 0.3800 | 10.00 | 3.8000 |
| 71 | | order_1767040331726724000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 72 | | order_1767040333746491000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 73 | | order_1767040335750975000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 74 | | order_1767040336872506000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 75 | | order_1767040337767882000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 76 | | order_1767040338899562000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 77 | | order_1767040339790358000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 78 | | order_1767040340918409000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 79 | | order_1767040341799962000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 80 | | order_1767040343826885000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 81 | | order_1767040344215887000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 82 | | order_1767040345917716000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 83 | | order_1767040346296721000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 84 | | order_1767040348400803000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 85 | | order_1767040348522632000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 86 | | order_1767040350528236000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 87 | | order_1767040352261105000 | DOWN | BUY | 0.3600 | 10.00 | 3.6000 |
| 88 | | order_1767040353265768000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 89 | | order_1767040355267102000 | DOWN | BUY | 0.3700 | 10.00 | 3.7000 |
| 90 | | order_1767040355891498000 | DOWN | BUY | 0.3800 | 10.00 | 3.8000 |
| 91 | | order_1767040355899745000 | DOWN | BUY | 0.3900 | 10.00 | 3.9000 |
| 92 | | order_1767040355904712000 | DOWN | BUY | 0.4000 | 10.00 | 4.0000 |
| 93 | | order_1767040357525037000 | DOWN | BUY | 0.4100 | 10.00 | 4.1000 |
| 94 | | order_1767040357530216000 | DOWN | BUY | 0.4300 | 10.00 | 4.3000 |
| 95 | | order_1767040357532621000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 96 | | order_1767040357534013000 | DOWN | BUY | 0.4600 | 10.00 | 4.6000 |
| 97 | | order_1767040359541799000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 98 | | order_1767040360232617000 | DOWN | BUY | 0.4600 | 10.00 | 4.6000 |
| 99 | | order_1767040361553952000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 100 | | order_1767040363626349000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 101 | | order_1767040363793540000 | DOWN | BUY | 0.4600 | 10.00 | 4.6000 |
| 102 | | order_1767040365784264000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 103 | | order_1767040365795507000 | DOWN | BUY | 0.4600 | 10.00 | 4.6000 |
| 104 | | order_1767040367789786000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 105 | | order_1767040368595222000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 106 | | order_1767040370359062000 | DOWN | BUY | 0.4500 | 10.00 | 4.5000 |
| 107 | | order_1767040370845640000 | DOWN | BUY | 0.4400 | 10.00 | 4.4000 |
| 108 | | order_1767040372332635000 | DOWN | BUY | 0.4300 | 10.00 | 4.3000 |
| 109 | | order_1767040374427805000 | DOWN | BUY | 0.4300 | 10.00 | 4.3000 |
| 110 | | order_1767040376431019000 | DOWN | BUY | 0.4300 | 10.00 | 4.3000 |
| **总计** | | | | | | | **407.30** |

---

## 📈 订单分析

### Token类型分布
- **UP订单**: 1笔（0.9%），金额: 5.20 USDC
- **DOWN订单**: 109笔（99.1%），金额: 402.10 USDC
- ⚠️ **订单分布极不均衡**: DOWN订单占99.1%，UP订单仅1笔

### 价格分布
- **UP订单价格**: 0.52c（52c）
- **DOWN订单价格范围**: 0.29c - 0.46c（29c - 46c）
- **平均价格**: 
  - UP: 0.52c（52c）
  - DOWN: 约 0.37c（37c）

### 订单特点
1. **几乎全是DOWN订单**: 109笔DOWN订单，只有1笔UP订单
2. **有1笔卖出订单**: order_1767040257726841000（DOWN SELL），可能是平仓或测试
3. **价格波动**: DOWN订单价格在0.29c到0.46c之间波动

---

## ⚠️ 问题分析

### 问题1：订单分布极不均衡
- **现象**: UP订单1笔，DOWN订单109笔
- **影响**: 无法实现双向持仓，无法进行市场中性套利
- **可能原因**:
  1. 策略逻辑问题：可能只下单DOWN，没有下单UP
  2. 价格条件限制：UP价格可能不满足下单条件
  3. 持仓限制：可能因为持仓限制，停止下单UP

### 问题2：持仓读取不一致
- **现象**: 
  - 持仓更新显示DOWN持仓1070 shares
  - 持仓统计显示DOWN=0 shares
- **影响**: 策略无法正确计算盈利，无法判断是否达成目标
- **可能原因**:
  1. `currentTotals`函数读取持仓时，持仓被过滤掉
  2. 持仓没有成本信息（TotalFilledSize=0或CostBasis=0），导致被跳过
  3. 持仓的MarketSlug不匹配
  4. 持仓的Status不是Open

### 问题3：策略执行情况
- **step函数调用**: 11,579次 ✅
- **目标检查**: 11,579次 ✅
- **Quote日志**: 1次 ⚠️
- **计算需要挂单**: 1次 ⚠️
- **需要继续下单**: 1次 ⚠️

---

## 💡 建议

### 1. 检查持仓读取逻辑
- ✅ 已添加日志到`currentTotals`函数
- 重新运行策略，观察日志，确认为什么持仓读取不到

### 2. 检查订单分布
- 检查为什么UP订单只有1笔
- 检查下单逻辑，确认是否正常下单UP和DOWN

### 3. 检查持仓更新
- 确认持仓更新是否正常
- 确认持仓的MarketSlug、Status、Size是否正确

---

## 📝 总结

### 订单情况
- ✅ **有订单**: 110笔订单，全部成交
- ⚠️ **订单分布不均**: UP订单1笔，DOWN订单109笔
- ⚠️ **持仓读取不一致**: 持仓更新显示有持仓，但持仓统计显示为0

### 问题
1. **订单分布极不均衡**: 无法实现双向持仓
2. **持仓读取不一致**: 策略无法正确计算盈利

### 下一步
1. **重新运行策略**: 使用修复后的代码（添加了持仓读取日志）
2. **观察日志**: 确认持仓读取情况
3. **检查订单分布**: 确认为什么UP订单只有1笔

---

**报告生成时间**: 2025-12-30

# 最小金额约束 - 快速参考

## ⚡ 问题

交易所要求：**订单金额 ≥ 1.0 USDC**

低价时会出问题：
```
价格 0.05, 想买 1.5 shares
金额 = 1.5 × 0.05 = 0.075 < 1.0 ❌
```

---

## ✅ 解决方案

### 自动调整数量

```
if 金额 < 1.1 USDC:
    计算所需数量 = 1.1 / 价格
    调整倍数 = 所需数量 / 原始数量
    
    if 调整倍数 <= 5.0:
        ✅ 使用调整后的数量下单
    else:
        ⚠️ 跳过订单（防止过度放大）
```

---

## ⚙️ 配置

```yaml
paired_trading:
  min_order_size: 1.1           # 最小金额
  auto_adjust_size: true         # 开启自动调整（推荐）
  max_size_adjust_ratio: 5.0     # 最大调整5倍
```

---

## 📊 示例

### ✅ 正常调整

```
价格: 0.55
原始: 1.5 shares (0.825 USDC) ❌
调整: 2.0 shares (1.100 USDC) ✅
倍数: 1.33x (< 5x)
→ 下单成功
```

### ⚠️ 跳过订单

```
价格: 0.08 (极低)
原始: 1.5 shares (0.12 USDC) ❌
调整: 13.75 shares (1.100 USDC)
倍数: 9.17x (> 5x)
→ 跳过订单
```

---

## 📈 监控

### 日志输出

**自动调整：**
```
⚠️ 自动调整数量以满足最小金额：
   1.5 → 2.2 shares (1.47x)
   原金额=0.825 → 新金额=1.210 USDC
```

**跳过订单：**
```
⚠️ 调整倍数 9.17 > 最大允许 5.0
   跳过下单
```

---

## 🎯 配置建议

| 资金量 | max_size_adjust_ratio | 说明 |
|-------|----------------------|------|
| < 50 USDC | 3.0 | 保守 |
| 50-200 USDC | 5.0 | 推荐 |
| > 200 USDC | 10.0 | 激进 |

---

## 💡 关键点

✅ **自动处理** - 无需手动干预  
✅ **风险控制** - 防止过度放大  
✅ **透明日志** - 每次调整都记录  
⚠️ **仓位增加** - 调整会增加持仓  
⚠️ **可能跳过** - 极低价时会跳过订单

---

## 📚 详细文档

- `MIN_ORDER_SIZE_HANDLING.md` - 完整说明
- `MIN_ORDER_SIZE_UPDATE.md` - 更新总结

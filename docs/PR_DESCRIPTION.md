# PRæ ‡é¢˜

feat: æˆå¯¹äº¤æ˜“ç­–ç•¥é‡è®¾è®¡ - ä»ç½‘æ ¼æ€ç»´åˆ°é£é™©ç®¡ç†æ€ç»´

---

# PRæè¿°

## ğŸ“‹ æ¦‚è¿°

é‡æ–°è®¾è®¡äº¤æ˜“ç­–ç•¥ï¼Œä»"ç½‘æ ¼æ€ç»´"è½¬å‘"é£é™©ç®¡ç†æ€ç»´"ï¼Œå®ç°çœŸæ­£çš„"æˆå¯¹äº¤æ˜“ã€å¯¹å†²é”å®š"ç­–ç•¥ã€‚

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### ä»ç½‘æ ¼ç­–ç•¥åˆ°æˆå¯¹äº¤æ˜“ç­–ç•¥

**æ—§çš„ç½‘æ ¼ç­–ç•¥é—®é¢˜ï¼š**
- âŒ ä¾èµ–å›ºå®šä»·æ ¼å±‚çº§ [62, 65, 71, 77, 81]
- âŒ ä»·æ ¼ä¸åˆ°ç½‘æ ¼å±‚çº§æ—¶ç­–ç•¥æ— æ³•æ‰§è¡Œ
- âŒ è¢«åŠ¨ç­‰å¾…ä»·æ ¼è§¦å‘
- âŒ ç½‘æ ¼å±‚çº§è®¾ç½®éœ€è¦å¤§é‡ç»éªŒ

**æ–°çš„æˆå¯¹äº¤æ˜“ç­–ç•¥ï¼š**
- âœ… ä¸ä¾èµ–å›ºå®šç½‘æ ¼ï¼Œä»»ä½•ä»·æ ¼éƒ½èƒ½è¯†åˆ«æœºä¼š
- âœ… åŸºäºé£é™©æ•å£å®æ—¶è®¡ç®—é©±åŠ¨å†³ç­–
- âœ… ä¸»åŠ¨è¯†åˆ«å¹¶æŠ“ä½æˆå¯¹é”å®šæœºä¼š
- âœ… å‚æ•°ç›´è§‚æ˜“æ‡‚ï¼Œæ— éœ€å¤æ‚è°ƒè¯•

## ğŸ—ï¸ ç­–ç•¥æ¶æ„

### ä¸‰é˜¶æ®µè®¾è®¡

**é˜¶æ®µ1: å¿«é€Ÿå»ºä»“** (0-5åˆ†é’Ÿ)
- ç›®æ ‡: å¿«é€Ÿå»ºç«‹åŒè¾¹åŸºç¡€ä»“ä½
- ç­–ç•¥: åœ¨ä½ä»·æ—¶ä¹°å…¥ï¼Œä¿æŒæŒä»“å¹³è¡¡
- ç‰¹ç‚¹: é€Ÿåº¦ä¼˜å…ˆï¼Œä½æˆæœ¬å»ºä»“

**é˜¶æ®µ2: æˆå¯¹é”å®š** (5-10åˆ†é’Ÿ)
- ç›®æ ‡: è¯†åˆ«å¹¶æ‰§è¡Œæˆå¯¹é”å®šäº¤æ˜“
- ç­–ç•¥: æ¶ˆé™¤é£é™©æ•å£ï¼Œç¡®ä¿ä¸¤ä¸ªæ–¹å‘éƒ½ç›ˆåˆ©
- ç‰¹ç‚¹: å®‰å…¨ä¼˜å…ˆï¼Œé£é™©é©±åŠ¨

**é˜¶æ®µ3: åˆ©æ¶¦æ”¾å¤§** (10-15åˆ†é’Ÿ)
- ç›®æ ‡: åœ¨é”å®šåŸºç¡€ä¸Šå®‰å…¨åœ°æ”¾å¤§åˆ©æ¶¦
- ç­–ç•¥: è¯†åˆ«ä¸»æ–¹å‘ï¼ŒåŠ ä»“+ä¿é™©
- ç‰¹ç‚¹: æ”¶ç›Šä¼˜å…ˆï¼Œå·²é”å®šæ‰æ”¾å¤§

### æ ¸å¿ƒå…¬å¼

```go
P_up_win = Q_up Ã— 1.0 - (C_up + C_down)     // UPèƒœåˆ©æ—¶çš„åˆ©æ¶¦
P_down_win = Q_down Ã— 1.0 - (C_up + C_down) // DOWNèƒœåˆ©æ—¶çš„åˆ©æ¶¦

ç†æƒ³çŠ¶æ€ï¼šP_up_win > 0 AND P_down_win > 0 (å®Œå…¨é”å®š)
```

## ğŸ“ ä¸»è¦å˜æ›´

### æ–°å¢æ–‡ä»¶

**ç­–ç•¥å®ç°ï¼š**
- `internal/strategies/pairedtrading/strategy.go` - ç­–ç•¥æ ¸å¿ƒé€»è¾‘ (912è¡Œ)
- `internal/strategies/pairedtrading/config.go` - é…ç½®å®šä¹‰å’ŒéªŒè¯ (315è¡Œ)
- `internal/strategies/pairedtrading/loop.go` - å•çº¿ç¨‹äº‹ä»¶å¾ªç¯ (95è¡Œ)
- `internal/strategies/pairedtrading/README.md` - ç­–ç•¥ä½¿ç”¨æ–‡æ¡£

**è®¾è®¡æ–‡æ¡£ï¼š**
- `docs/paired_trading_design.md` - è¯¦ç»†è®¾è®¡æ–‡æ¡£
- `docs/PAIRED_TRADING_SUMMARY.md` - å®Œæˆæ€»ç»“
- `docs/EXECUTION_EXAMPLE.md` - å®Œæ•´æ‰§è¡Œç¤ºä¾‹ (914è¡Œ)
- `docs/EXECUTION_FLOWCHART.md` - æ‰§è¡Œæµç¨‹å›¾ (383è¡Œ)
- `docs/QUICKSTART.md` - å¿«é€Ÿå¯åŠ¨æŒ‡å—

**æœ€å°é‡‘é¢çº¦æŸå¤„ç†ï¼š**
- `docs/MIN_ORDER_SIZE_HANDLING.md` - è¯¦ç»†è¯´æ˜ (384è¡Œ)
- `docs/MIN_ORDER_SIZE_UPDATE.md` - æ›´æ–°æ€»ç»“ (313è¡Œ)
- `docs/MIN_ORDER_SIZE_QUICKREF.md` - å¿«é€Ÿå‚è€ƒ

### é…ç½®æ›´æ–°

```yaml
strategies:
  enabled:
    - paired_trading
  
  paired_trading:
    # é˜¶æ®µæ§åˆ¶
    build_duration: 300       # 5åˆ†é’Ÿ
    lock_start: 300
    amplify_start: 600        # 10åˆ†é’Ÿ
    cycle_duration: 900       # 15åˆ†é’Ÿ
    
    # å»ºä»“å‚æ•°
    base_target: 30.0
    build_lot_size: 3.0
    build_threshold: 0.60
    
    # é”å®šå‚æ•°
    lock_threshold: 5.0
    target_profit_base: 2.0
    
    # æ”¾å¤§å‚æ•°
    amplify_target: 5.0
    
    # æœ€å°é‡‘é¢çº¦æŸå¤„ç†
    min_order_size: 1.1
    auto_adjust_size: true
    max_size_adjust_ratio: 5.0
```

## ğŸ” å…³é”®ç‰¹æ€§

### 1. é£é™©é©±åŠ¨å†³ç­–

ä¸å…³æ³¨ä»·æ ¼æ˜¯å¦åˆ°è¾¾æŸä¸ªå±‚çº§ï¼Œè€Œæ˜¯å…³æ³¨é£é™©æ•å£æ˜¯å¦éœ€è¦å¯¹å†²ã€‚

```python
if P_up_win < 0:
    è¡¥å…… UP (æ¶ˆé™¤é£é™©æ•å£)
if P_down_win < 0:
    è¡¥å…… DOWN (æ¶ˆé™¤é£é™©æ•å£)
```

### 2. æå‰é˜¶æ®µåˆ‡æ¢

- å¸¸è§„ï¼šåŸºäºæ—¶é—´åˆ‡æ¢é˜¶æ®µ
- æå‰ï¼šåŸºäºä»·æ ¼æç«¯åŒ–æå‰åˆ‡æ¢
  - ä»·æ ¼è¶…è¿‡0.85 â†’ æå‰è¿›å…¥é”å®šé˜¶æ®µ
  - ä»·æ ¼è¶…è¿‡0.90ä¸”å·²é”å®š â†’ æå‰è¿›å…¥æ”¾å¤§é˜¶æ®µ

### 3. é”å®šä¼˜å…ˆåŸåˆ™

é˜¶æ®µ3å¿…é¡»å·²å®Œæˆé”å®šæ‰æ‰§è¡Œæ”¾å¤§ï¼š
```python
if é˜¶æ®µ == Amplify:
    if å·²é”å®š:
        æ‰§è¡Œæ”¾å¤§é€»è¾‘
    else:
        ç»§ç»­æ‰§è¡Œé”å®šé€»è¾‘  # æœªé”å®šï¼Œä¸æ”¾å¤§
```

### 4. æœ€å°é‡‘é¢çº¦æŸå¤„ç†

è‡ªåŠ¨è°ƒæ•´è®¢å•æ•°é‡ä»¥æ»¡è¶³äº¤æ˜“æ‰€æœ€å°é‡‘é¢è¦æ±‚ï¼ˆâ‰¥1.0 USDCï¼‰ï¼š

```python
if è®¢å•é‡‘é¢ < 1.1 USDC:
    éœ€è¦æ•°é‡ = 1.1 / ä»·æ ¼
    è°ƒæ•´å€æ•° = éœ€è¦æ•°é‡ / åŸå§‹æ•°é‡
    
    if è°ƒæ•´å€æ•° <= 5.0:
        ä½¿ç”¨è°ƒæ•´åçš„æ•°é‡ä¸‹å•  # è‡ªåŠ¨æ”¾å¤§
    else:
        è·³è¿‡è®¢å•  # é˜²æ­¢è¿‡åº¦æ”¾å¤§ä»“ä½
```

**ç¤ºä¾‹ï¼š**
- ä»·æ ¼0.55ï¼ŒåŸå§‹1.5 shares â†’ è°ƒæ•´åˆ°2.0 shares (1.33x) âœ…
- ä»·æ ¼0.25ï¼ŒåŸå§‹1.5 shares â†’ è°ƒæ•´åˆ°4.4 shares (2.93x) âœ…
- ä»·æ ¼0.08ï¼ŒåŸå§‹1.5 shares â†’ éœ€è¦13.75 shares (9.17x) âŒ è·³è¿‡

## ğŸ“Š ä¸å…¶ä»–ç­–ç•¥çš„å¯¹æ¯”

| ç»´åº¦ | ç½‘æ ¼ç­–ç•¥ | å¥—åˆ©ç­–ç•¥ | æˆå¯¹äº¤æ˜“ç­–ç•¥ |
|------|---------|---------|------------|
| **è§¦å‘æœºåˆ¶** | ä»·æ ¼è¾¾åˆ°å›ºå®šå±‚çº§ | æ—¶é—´åˆ†æ®µ+ä»·æ ¼ | é£é™©æ•å£å®æ—¶è®¡ç®— |
| **çµæ´»æ€§** | â­â­ | â­â­â­ | â­â­â­â­â­ |
| **é”å®šé€Ÿåº¦** | æ…¢ï¼ˆè¢«åŠ¨ç­‰å¾…ï¼‰ | ä¸­ç­‰ | å¿«ï¼ˆä¸»åŠ¨è¯†åˆ«ï¼‰ |
| **é€‚åº”æ€§** | å·®ï¼ˆå›ºå®šå±‚çº§ï¼‰ | ä¸­ç­‰ | å¼ºï¼ˆä»»ä½•ä»·æ ¼ï¼‰ |
| **å‚æ•°è°ƒè¯•** | å›°éš¾ï¼ˆå±‚çº§è®¾ç½®ï¼‰ | ä¸­ç­‰ | ç®€å•ï¼ˆç›´è§‚é˜ˆå€¼ï¼‰ |
| **ä»£ç å¤æ‚åº¦** | é«˜ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰ | ä¸­ç­‰ | ä¸­ç­‰ï¼ˆæ¸…æ™°åˆ†å±‚ï¼‰ |

## ğŸ“ˆ ä»£ç ç»Ÿè®¡

```
æ€»æ–‡ä»¶æ•°: 99ä¸ªæ–‡ä»¶å˜æ›´
æ–°å¢è¡Œæ•°: +17,756
åˆ é™¤è¡Œæ•°: -463

æ ¸å¿ƒç­–ç•¥ä»£ç :
- strategy.go: 912è¡Œ
- config.go: 315è¡Œ
- loop.go: 95è¡Œ

æ–‡æ¡£:
- è®¾è®¡æ–‡æ¡£: 2,435è¡Œ
- ä½¿ç”¨æ–‡æ¡£: 1,849è¡Œ
```

## âœ… æµ‹è¯•éªŒè¯

- âœ… ç¼–è¯‘æˆåŠŸï¼Œæ— è¯­æ³•é”™è¯¯
- âœ… ç­–ç•¥å·²æ³¨å†Œåˆ° BBGO æ¡†æ¶
- âœ… é…ç½®éªŒè¯é€šè¿‡
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- âœ… è¾¹ç•Œæ¡ä»¶å¤„ç†

## ğŸ“š æ–‡æ¡£

æœ¬PRåŒ…å«å®Œæ•´çš„æ–‡æ¡£ï¼ˆå…±çº¦4,284è¡Œï¼‰ï¼š

**è®¾è®¡æ–‡æ¡£ï¼š**
- ç†å¿µã€æ¶æ„ã€å¯¹æ¯”åˆ†æ
- æ ¸å¿ƒæ€æƒ³å’Œå…¬å¼æ¨å¯¼
- ä¸ç½‘æ ¼/å¥—åˆ©ç­–ç•¥çš„è¯¦ç»†å¯¹æ¯”

**ä½¿ç”¨æ–‡æ¡£ï¼š**
- é…ç½®å‚æ•°è¯¦è§£
- å®é™…ä½¿ç”¨ç¤ºä¾‹
- å‚æ•°è°ƒä¼˜å»ºè®®

**æ‰§è¡Œç¤ºä¾‹ï¼š**
- 15åˆ†é’Ÿå®Œæ•´å‘¨æœŸæ¨¡æ‹Ÿ
- æ¯ä¸ªæ—¶é—´ç‚¹çš„è¯¦ç»†åˆ†æ
- è®¢å•æ‰§è¡Œå’Œåˆ©æ¶¦è®¡ç®—

**æµç¨‹å›¾ï¼š**
- æ•´ä½“æµç¨‹å›¾
- å†³ç­–å¾ªç¯
- å„é˜¶æ®µè¯¦ç»†é€»è¾‘

**å¿«é€Ÿå¯åŠ¨ï¼š**
- 3æ­¥å¯åŠ¨æŒ‡å—
- å¸¸è§é—®é¢˜è§£ç­”

**æœ€å°é‡‘é¢çº¦æŸï¼š**
- é—®é¢˜èƒŒæ™¯å’Œè§£å†³æ–¹æ¡ˆ
- é…ç½®å»ºè®®å’Œå®é™…ç¤ºä¾‹
- å½±å“åˆ†æå’Œæœ€ä½³å®è·µ

## ğŸ¯ ä½¿ç”¨å»ºè®®

### é¦–æ¬¡ä½¿ç”¨

1. ä¿®æ”¹ `config.yaml`ï¼Œå¯ç”¨ç­–ç•¥ï¼š
```yaml
strategies:
  enabled:
    - paired_trading
```

2. å¯åŠ¨æœºå™¨äººï¼š
```bash
go run cmd/bot/main.go
```

3. è§‚å¯Ÿæ—¥å¿—è¾“å‡ºï¼Œå…³æ³¨é”å®šçŠ¶æ€

### å‚æ•°è°ƒä¼˜

**å°èµ„é‡‘é‡ï¼ˆ< 50 USDCï¼‰ï¼š**
```yaml
base_target: 30.0
target_profit_base: 2.0
max_size_adjust_ratio: 3.0
```

**ä¸­ç­‰èµ„é‡‘é‡ï¼ˆ50-200 USDCï¼‰ï¼š**
```yaml
base_target: 100.0
target_profit_base: 5.0
max_size_adjust_ratio: 5.0
```

**å¤§èµ„é‡‘é‡ï¼ˆ> 200 USDCï¼‰ï¼š**
```yaml
base_target: 500.0
target_profit_base: 20.0
max_size_adjust_ratio: 10.0
```

## ğŸ‰ æ ¸å¿ƒä»·å€¼

è¿™ä¸ªæ–°ç­–ç•¥çš„æœ¬è´¨æ˜¯ï¼š**ä»"ç½‘æ ¼æ€ç»´"è½¬å‘"é£é™©ç®¡ç†æ€ç»´"**

### æ—§æ€ç»´ï¼ˆç½‘æ ¼ï¼‰
```
ä»·æ ¼åˆ°è¾¾ 62åˆ† â†’ ä¹°å…¥
ä»·æ ¼åˆ°è¾¾ 65åˆ† â†’ ä¹°å…¥
ï¼ˆè¢«åŠ¨ç­‰å¾…ä»·æ ¼è§¦å‘ï¼‰
```

### æ–°æ€ç»´ï¼ˆæˆå¯¹é”å®šï¼‰
```
æ£€æµ‹åˆ°UPæ–¹å‘é£é™©æ•å£ï¼ˆP_up < 0ï¼‰ â†’ ä¸»åŠ¨è¡¥å……UP
æ£€æµ‹åˆ°DOWNæ–¹å‘é£é™©æ•å£ï¼ˆP_down < 0ï¼‰ â†’ ä¸»åŠ¨è¡¥å……DOWN
ï¼ˆä¸»åŠ¨è¯†åˆ«å¹¶æ¶ˆé™¤é£é™©ï¼‰
```

### å…³é”®åŒºåˆ«

| ç»´åº¦ | ç½‘æ ¼æ€ç»´ | æˆå¯¹é”å®šæ€ç»´ |
|------|---------|------------|
| **å…³æ³¨ç‚¹** | ä»·æ ¼ä½ç½® | é£é™©æ•å£ |
| **å†³ç­–æ–¹å¼** | è¢«åŠ¨ç­‰å¾… | ä¸»åŠ¨è¯†åˆ« |
| **è§¦å‘æ¡ä»¶** | ä»·æ ¼è¾¾åˆ°å±‚çº§ | åˆ©æ¶¦ä¸ºè´Ÿ |
| **æ‰§è¡Œæ—¶æœº** | å›ºå®šä»·æ ¼ç‚¹ | ä»»ä½•ä»·æ ¼ |
| **é€‚åº”æ€§** | ä½ | é«˜ |

è¿™æ‰æ˜¯çœŸæ­£çš„"æˆå¯¹äº¤æ˜“ã€å¯¹å†²é”å®š"ç­–ç•¥ï¼

---

## ğŸ“ æäº¤å†å²

æœ¬PRåŒ…å«ä»¥ä¸‹æäº¤ï¼š

1. **bf0bf26** - æ·»åŠ è®¾è®¡æ–‡æ¡£
2. **965a5b2** - å®ç°æˆå¯¹äº¤æ˜“ç­–ç•¥
3. **fa53358** - æ·»åŠ æ‰§è¡Œç¤ºä¾‹å’Œæµç¨‹å›¾æ–‡æ¡£
4. **25ddbf5** - æ·»åŠ æœ€å°è®¢å•é‡‘é¢è‡ªåŠ¨è°ƒæ•´åŠŸèƒ½

---

## ğŸ”— ç›¸å…³é“¾æ¥

- å¿«é€Ÿå¯åŠ¨: `docs/QUICKSTART.md`
- è®¾è®¡æ–‡æ¡£: `docs/paired_trading_design.md`
- å®Œæ•´ç¤ºä¾‹: `docs/EXECUTION_EXAMPLE.md`
- æµç¨‹å›¾: `docs/EXECUTION_FLOWCHART.md`
- æœ€å°é‡‘é¢å¤„ç†: `docs/MIN_ORDER_SIZE_HANDLING.md`

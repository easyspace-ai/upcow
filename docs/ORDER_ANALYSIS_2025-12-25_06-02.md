# 订单分析报告（2025-12-25 06:02）

## 📋 交易概览

根据日志和 UI 截图分析，本次交易情况如下：

### 策略触发
- **时间**: 2025-12-25 06:02:40
- **方向**: UP
- **Entry 价格**: 64¢
- **Hedge 价格**: 33¢
- **速度**: 2.066 c/s
- **移动**: 14c / 6.8s

## 📊 订单执行详情

### 1. 下单情况

**下单成功**: 4 个订单
- `0xa3fd8459...` - Entry 订单（UP @ 64¢）
- `0xe1e09c00...` - Hedge 订单（DOWN @ 33¢）
- `0xc32a5dc6...` - Hedge 订单（DOWN @ 33¢）- **已取消**
- `0x910de405...` - 另一个订单

**下单失败**: 2 个订单（FAK 订单，市场流动性不足）

### 2. 订单成交情况

**成交订单**: 2 个订单，都是 **11 shares** ✅

1. **Entry 订单 (UP @ 64¢)**
   - OrderID: `0xa3fd8459e68b7092ee669a7ca718b90bd57cf1a7351c928d3b98b0b7eb1f549b`
   - Status: `filled`
   - FilledSize: **11.0000 shares** ✅
   - AssetID: `104299859903721549039131367077715723770035365029446591632104934464740593704474`

2. **Hedge 订单 (DOWN @ 33¢)**
   - OrderID: `0x910de4050248e4b555340d47371aa3f02418bc3c7b10ee5f2285d5c368c337fa`
   - Status: `filled`
   - FilledSize: **11.0000 shares** ✅
   - AssetID: `24054276575154719324614603670823282087656563436312221171284136207867107152181`

### 3. 订单取消情况

**取消订单**: 1 个订单

- OrderID: `0xc32a5dc605ea8551f0ee0da3e0e07453a160641b9369119d8cccc5b2e1e78bd5`
- Status: `canceled`
- Side: BUY
- Price: **33¢** (Hedge 价格)
- OriginalSize: **11 shares**
- SizeMatched: **0** (未成交)
- 取消时间: 2025-12-25 06:03:28

## ✅ 数量验证

### 成交订单数量

| 订单类型 | 价格 | 数量 | 状态 |
|---------|------|------|------|
| **Entry (UP)** | 64¢ | **11 shares** | ✅ 已成交 |
| **Hedge (DOWN)** | 33¢ | **11 shares** | ✅ 已成交 |

**结论**: ✅ **两边数量相等（都是 11 shares）**

### 当前持仓（根据 UI 截图）

| 方向 | 数量 | 均价 | 成本 | 当前价值 | 收益 |
|------|------|------|------|---------|------|
| **UP** | 11 shares | 62.5¢ | $7.04 | $6.81 | -$0.23 (-3.26%) |
| **DOWN** | 11 shares | 37¢ | $4.07 | $4.35 | +$0.28 (+6.76%) |

**验证**: ✅ **两边数量相等（都是 11 shares）**

## 🔍 问题分析

### 1. 为什么有两个 Hedge 订单？

从日志看，系统下了 2 个 Hedge 订单：
- `0xe1e09c00...` - 第一个 Hedge 订单
- `0xc32a5dc6...` - 第二个 Hedge 订单（已取消）

**可能原因**:
- Entry 订单（FAK）失败后，系统可能重新尝试下单
- 或者系统同时下了多个 Hedge 订单（需要检查代码逻辑）

### 2. 为什么有一个订单被取消？

- OrderID: `0xc32a5dc6...`
- 价格: 33¢
- 数量: 11 shares
- 状态: 已取消，未成交

**可能原因**:
- 用户手动取消（根据用户描述："我取消了一个"）
- 或者系统自动取消（需要检查取消逻辑）

### 3. 为什么还有挂单？

根据 UI 截图，还有一个挂单：
- **Buy Down @ 34¢**
- **0/11 filled**
- **Total: $3.74**

**分析**:
- 这可能是另一个 Hedge 订单（`0xe1e09c00...`）
- 或者系统重新下的 Hedge 订单
- 价格从 33¢ 变成了 34¢（可能是市场波动）

## 📈 交易成本分析

### Entry 订单 (UP)
- 数量: 11 shares
- 价格: 64¢
- 成本: 11 × 0.64 = **$7.04** ✅（与 UI 一致）

### Hedge 订单 (DOWN)
- 数量: 11 shares
- 价格: 33¢
- 成本: 11 × 0.33 = **$3.63**

**但 UI 显示 DOWN 成本为 $4.07**，可能原因：
- 有部分订单在更高价格成交
- 或者有其他订单成交

## 🎯 关键发现

### ✅ 成功点

1. **数量相等**: Entry 和 Hedge 都是 11 shares ✅
2. **代码修改生效**: 确保数量相等的逻辑正常工作 ✅
3. **订单成交**: 主要订单都成功成交 ✅

### ⚠️ 需要注意

1. **多个 Hedge 订单**: 系统可能下了多个 Hedge 订单，需要检查逻辑
2. **订单取消**: 有一个订单被取消，需要确认是手动还是自动
3. **挂单状态**: 还有一个挂单未成交，需要监控

## 💡 建议

1. **检查 Hedge 订单逻辑**: 确认为什么会有多个 Hedge 订单
2. **添加日志**: 在下单前输出 `entryShares` 和 `hedgeShares`，方便验证
3. **监控挂单**: 关注未成交的挂单，必要时手动处理

---

**报告生成时间**: 2025-12-25  
**分析结论**: ✅ 两边数量相等（都是 11 shares），代码修改生效


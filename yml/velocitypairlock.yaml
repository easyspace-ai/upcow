# é€Ÿåº¦è§¦å‘åŒå‘é™ä»·å¯¹å†²ï¼ˆBTC 15mï¼‰
#
# è¯´æ˜ï¼š
# - market/dry_run æ˜¯ç­–ç•¥æ–‡ä»¶çº§åˆ«çš„è¦†ç›–ï¼ˆå¯é€‰ï¼‰
# - exchangeStrategies æŒ‰ bbgo main é£æ ¼æŒ‚è½½

market:
  symbol: eth
  timeframe: 15m
  kind: updown

dry_run: false

exchangeStrategies:
  - on: polymarket
    velocitypairlock:
      enabled: true
      # ğŸ§ª æ¼”ç»ƒæ¨¡å¼ï¼šåªè¾“å‡ºå†³ç­–æ—¥å¿—ï¼Œä¸çœŸå®ä¸‹å•/æ’¤å•/åˆå¹¶
      decisionOnly: false

      # ===== é€Ÿåº¦è§¦å‘ =====
      windowSeconds: 5
      minMoveCents: 4
      minVelocityCentsPerSec: 0.4
      # é€Ÿåº¦æ–¹å‘ç­–ç•¥ï¼špositive=åªåœ¨ä»·æ ¼ä¸Šæ¶¨ï¼ˆæ­£é€Ÿç‡ï¼‰æ—¶è§¦å‘ï¼›abs=æŒ‰ç»å¯¹å€¼è§¦å‘
      velocityDirectionMode: positive
      # å½“ UP/DOWN åŒæ—¶æ»¡è¶³è§¦å‘æ¡ä»¶æ—¶ï¼Œé€‰æ‹©æ­£é€Ÿç‡æ›´å¤§çš„é‚£ä¸€ä¾§ä½œä¸ºä¸» leg
      primaryPickMode: max_velocity
      cooldownMs: 3000

      # ===== é”åˆ©æŒ‚å• =====
      # ç¤ºä¾‹ï¼šprofitCents=3 æ—¶ï¼Œå¦‚æœ UP å‚è€ƒä»·ä¸º 70ï¼Œåˆ™ DOWN ä¼šæŒ‚ 27ï¼ˆé” 3 ä¸ªç‚¹ï¼‰
      profitCents: 3
      orderSize: 6
      minEntryPriceCents: 15
      maxEntryPriceCents: 85
      minOrderUSDC: 1.01

      # ===== ä¸‹å•æ¨¡å¼ =====
      # parallel: å¹¶å‘ä¸‹å•ï¼ˆåŒæ—¶æäº¤ UP+DOWNï¼‰
      # sequential: é¡ºåºä¸‹å•ï¼ˆå…ˆä¸» legï¼Œä¸»æˆäº¤åå†å¯¹å†²ï¼‰
      orderExecutionMode: sequential
      # ä¸»/å¯¹å†²ä¸‹å•æ–¹å¼ï¼šlimit | taker
      primaryOrderStyle: taker
      hedgeOrderStyle: limit
      # taker æ¨¡å¼åƒå•ä»·æ ¼ï¼šbestAsk + offsetï¼ˆåˆ†ï¼‰
      takerOffsetCents: 1
      # é¡ºåºæ¨¡å¼ gateï¼šåªæœ‰ä¸» leg ä»·æ ¼åœ¨åŒºé—´å†…æ‰å…è®¸å…ˆä¸»åå¯¹å†²
      sequentialPrimaryMinCents: 70
      sequentialPrimaryMaxCents: 88
      # ä¸» leg æœ€å¤šç­‰ 2 ç§’æˆäº¤ï¼Œè¶…æ—¶æ’¤å•å¹¶å›åˆ° idle
      sequentialPrimaryMaxWaitMs: 5000

      # ===== æˆäº¤ç¡®è®¤ï¼ˆWS -> API å…œåº•ï¼‰=====
      wsFillConfirmTimeoutSeconds: 5
      # å…œåº•ç¡®è®¤åä»æœªæˆäº¤ï¼šæ˜¯å¦æ’¤å•
      cancelIfNotFilledAfterConfirm: true

      # ===== è®¢å•æ”¶æ•›ï¼ˆé˜²æ­¢é‡å¤ä¸‹å•/æŒ‚å•å †ç§¯å ç”¨èµ„é‡‘ï¼‰=====
      enforceOrderConvergence: true
      convergeIntervalMs: 2000
      maxOpenOrdersInMarket: 2
      cancelConfirmTimeoutSeconds: 6
      cancelConfirmPollIntervalMs: 500

      # ===== å¯¹å†²åå®æ—¶ç›¯ç›˜é”æŸ =====
      priceStopEnabled: true
      priceStopCheckIntervalMs: 200
      priceStopSoftLossCents: -20
      priceStopHardLossCents: -40
      maxAcceptableLossCents: 30

      # ===== å‘¨æœŸä¿æŠ¤ =====
      cycleEndProtectionMinutes: 3
      maxTradesPerCycle: 2

      # ===== æˆäº¤åè‡ªåŠ¨åˆå¹¶é‡Šæ”¾èµ„é‡‘ =====
      autoMerge:
        enabled: true
        minCompleteSets: 5
        maxCompleteSetsPerRun: 0
        mergeRatio: 1.0
        intervalSeconds: 45
        onlyIfNoOpenOrders: false
        reconcileAfterMerge: true
        reconcileMaxWaitSeconds: 30
        mergeTriggerDelaySeconds: 30
        metadata: "velocitypairlock:autoMerge"

